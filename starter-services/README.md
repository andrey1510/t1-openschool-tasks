__README__
==========

Данное приложение позволяет логировать входящие и исходящие HTTP запросы и ответы на них.
Использованный стек: Java SE 17, Spring Boot 3.3.1, Maven, Lombok, REST-архитектура, Swagger, JUnit 5.

Установка и запуск:
-----------------------------------

Нужно склонировать репозиторий. Затем запустить сервис **log-starter** в IDE. Также запустить в IDE **product-app**, если он нужен. Весь функционал логирования содержится в сервисе **log-starter**. Сервис **product-app** опциональный и предназначен для помощи в ручных тестах, где это указано (где не указано, он не требуется). Этот сервис принимает сообщения от **log-starter**. 

После запуска сервис **log-starter** будет доступен по адресу:
```http://localhost:8558```

Приложение поддерживает Swagger. Получить доступ к Swagger UI можно по адресу:
```http://localhost:8558/swagger-ui.html```

Функционал приложения:
------------------------------------------

Сервис **log-starter** логирует входящие и исходящие HTTP запросы и ответы на них. Логируются следующие данные:
1. URL запроса,
2. Тип метода запроса,
3. Заголовки запроса,
4. Код ответа,
5. Заголовки ответа,
6. Время обработки запроса.

Записи выводятся в консоль.

Логирование входящих запросов осуществляется с помощью фильтра. Логирование исходящих запросов осуществляется с помощью интерцептора.

Логирование запросов можно включать/отключать с помощью файла application.yml.
1. logger.ingoing.enabled отвечает за логирование входящих запросов.
2. logger.outgoing.enabled отвечает за логирование исходящих запросов.

Уровень логирования также настраивается в application.yml.

### Работа с приложением 

Контроллер **SampleController** сервиса **log-starter** позволяет протестировать работу функционала логирования. Он содержит:

**Метод requestAndReceiveResponse()** - принимает запросы GET на:
```http://localhost:8558/samples/request-and-receive-response```

В ответ **log-starter** выдаст сообщение.

**Метод requestAndReceiveError()** - принимает запросы GET на:
```http://localhost:8558/samples/request-and-receive-error```

В ответ **log-starter** сообщит об ошибке.

**Метод requestOtherAppAndReceiveResponse()** - принимает запросы GET на:
```http://localhost:8558/samples/request-other-app```

Нужен запущенный сервис **product-app**. Сервис **log-starter** отправит запрос на сервис **product-app**, и **product-app** отправит сообщение в ответ.

**Метод requestOtherAppAndReceiveError()** - принимает запросы GET на:
```http://localhost:8558/samples/request-other-app-and-receive-error```

Нужен запущенный сервис **product-app**. Сервис **log-starter** отправит запрос на сервис **product-app**, и **product-app** отправит сообщение об ошибке в ответ.

### JUnit тесты

К сервису **log-starter** прилагаются юнит-тесты.